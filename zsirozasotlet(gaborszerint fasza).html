<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>Zsírozás – valódi lapokkal</title>

<style>
body {
    background:#063;
    font-family: Arial;
    color:white;
}

.hand, .table {
    display:flex;
    gap:10px;
    margin:10px 0;
}

.card {
    width:256px;
    height:341px;
    border-radius:10px;
    cursor:pointer;
    border:2px solid transparent;
}

.card img {
    width:100%;
    height:100%;
    border-radius:10px;
}

.card:hover {
    border-color:yellow;
}

.disabled {
    opacity:0.4;
    pointer-events:none;
}

.area {
    background:#0005;
    padding:10px;
    border-radius:8px;
}
</style>
</head>

<body>

<h1>Zsírozás - Projektmunka</h1>
<div class="area">
    <b>Aktív játékos:</b> <span id="player"></span>
</div>



<h3>Játékos 1</h3>
<div class="hand" id="hand0"></div>

<h3>Asztal</h3>
<div class="table" id="table"></div>

<h3>Játékos 2</h3>
<div class="hand" id="hand1"></div>

<script>
const szinek = ["zöld","szív","tök","makk"];
const ertekek = ["7","8","9","10","alsó","felső","király","ász"];

const szin = {
    "zöld": "level",
    "szív": "sziv",
    "tök": "tok",
    "makk": "makk"
};

const ertek = {
    "7":"7",
    "8":"8",
    "9":"9",
    "10":"10",
    "alsó":"also",
    "felső":"felso",
    "király":"kiraly",
    "ász":"asz"
};


function kartyakep(c){
    return `kartyak/${szin[c.s]}${ertek[c.v]}.png`;
}


let deck=[], kezek=[[],[]], table=[];
let current=0;
let zsirSzam = 0;
let utsotamado=null;
let utesvan=false;

function paklitad(){
    deck=[];
    szinek.forEach(s=>{
        ertekek.forEach(v=>{
            deck.push({s,v});
        });
    });
}

function kever(a){
    for(let i=a.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
    }
}

function oszt(){
    let turn = 0;
    while(deck.length && (kezek[0].length < 4 || kezek[1].length < 4)){
        if(kezek[turn].length < 4){
            kezek[turn].push(deck.pop());
        }
        turn = 1 - turn;
    }
}

function hahetes(c){ return c.v==="7"; }
function ugyanErtek(a,b){ return a.v===b.v; }

function tudTovabb(card){
    const last=table[table.length-1];
    return ugyanErtek(card,last) || hahetes(card);
}

function jatszik(p,idx){
    if(p!==current) return;

    const card=kezek[p].splice(idx,1)[0];

    if(utesvan && !tudTovabb(card)){
        felveszAsztal(utsotamado);
        return;
    }

    table.push(card);

    if(table.length>=1 && tudTovabb(card)){
        utsotamado=p;
        utesvan=true;
        current=1-p;
    }
    else if(table.length>=2){
        felveszAsztal(1-p);
        return;
    }
    else{
        current=1-p;
    }

    megjelen();
}

function felveszAsztal(p){
    table=[];
    utesvan=false;
    utsotamado=null;
    oszt();
    current=p;
    megjelen();
}

function kartyaDiv(c,p,i){
    const d=document.createElement("div");
    d.className="card";

    const img=document.createElement("img");
    img.src = kartyakep(c);
    img.alt = `${c.s} ${c.v}`;

    d.appendChild(img);

    if(p!==undefined) d.onclick=()=>jatszik(p,i);
    return d;
}

function megjelen(){
    document.getElementById("player").textContent="Játékos "+(current+1);

    document.getElementById("table").innerHTML="";
    document.getElementById("hand0").innerHTML="";
    document.getElementById("hand1").innerHTML="";

    table.forEach(c=>{
        document.getElementById("table").appendChild(kartyaDiv(c));
    });

    kezek.forEach((h,p)=>{
        h.forEach((c,i)=>{
            const d=kartyaDiv(c,p,i);
            if(p!==current) d.classList.add("disabled");
            document.getElementById("hand"+p).appendChild(d);
        });
    });
}

paklitad();
kever(deck);
oszt();
megjelen();
</script>

</body>
</html>
