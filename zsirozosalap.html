<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>Zs√≠roz√°s ‚Äì val√≥di lapokkal</title>

<style>
body {
    background:#063;
    font-family: Arial;
    color:white;
}

.hand, .table {
    display:flex;
    gap:10px;
    margin:10px 0;
}

.zold{
    background-position-y: 35px;

}

.piros{
    background-position-y: 318px;
}

.tok{
    background-position-y: 552px;
}

.makk{
    background-position-y: 783px;
}
.hetes{
    background-position-x: 12px;
}
.nyolcas
{
    background-position-x: 135px;
}

.card {
    width:256px;
    height:341px;
    background-image:url("cards.png");
    background-size:2048px 1365px;
    border-radius:10px;
    cursor:pointer;
    border:2px solid transparent;
}

.card:hover {
    border-color:yellow;
}

.disabled {
    opacity:0.4;
    pointer-events:none;
}

.area {
    background:#0005;
    padding:10px;
    border-radius:8px;
}
</style>
</head>

<body>
    <div class="zold hetes"></div>

<h1>üÉè Zs√≠roz√°s ‚Äì tov√°bb√ºt√©ssel</h1>

<div class="area">
    <b>Akt√≠v j√°t√©kos:</b> <span id="player"></span>
</div>

<h3>Asztal</h3>
<div class="table" id="table"></div>

<h3>J√°t√©kos 1</h3>
<div class="hand" id="hand0"></div>

<h3>J√°t√©kos 2</h3>
<div class="hand" id="hand1"></div>

<script>
const suits = ["z√∂ld","sz√≠v","t√∂k","makk"];
const values = ["7","8","9","10","als√≥","fels≈ë","kir√°ly","√°sz"];

let deck=[], hands=[[],[]], table=[];
let current=0;
let lastAttacker=null;
let beatActive=false;

function makeDeck(){
    deck=[];
    suits.forEach(s=>{
        values.forEach(v=>{
            deck.push({s,v});
        });
    });
}

function shuffle(a){
    for(let i=a.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
    }
}

function deal(){
    for(let i=0;i<2;i++)
        while(hands[i].length<4 && deck.length)
            hands[i].push(deck.pop());
}

function isSeven(c){ return c.v==="7"; }
function sameValue(a,b){ return a.v===b.v; }

function canBeat(card){
    const last=table[table.length-1];
    return sameValue(card,last) || isSeven(card);
}

function play(p,idx){
    if(p!==current) return;

    const card=hands[p].splice(idx,1)[0];

    if(beatActive && !canBeat(card)){
        takeTable(lastAttacker);
        return;
    }

    table.push(card);

    if(table.length>=2 && canBeat(card)){
        lastAttacker=p;
        beatActive=true;
        current=1-p;
    }
    else if(table.length>=2){
        takeTable(1-p);
        return;
    }
    else{
        current=1-p;
    }

    render();
}

function takeTable(p){
    table=[];
    beatActive=false;
    lastAttacker=null;
    deal();
    current=p;
    render();
}

const CARD_POSITIONS = {
  "z√∂ld": {
    "7":{x:0,y:0},"8":{x:256,y:0},"9":{x:512,y:0},"10":{x:768,y:300},
    "als√≥":{x:1024,y:0},"fels≈ë":{x:1280,y:0},"kir√°ly":{x:1536,y:0},"√°sz":{x:1792,y:0}
  },
  "sz√≠v": {
    "7":{x:0,y:341},"8":{x:256,y:341},"9":{x:512,y:341},"10":{x:768,y:341},
    "als√≥":{x:1024,y:341},"fels≈ë":{x:1280,y:341},"kir√°ly":{x:1536,y:341},"√°sz":{x:1792,y:341}
  },
  "t√∂k": {
    "7":{x:0,y:682},"8":{x:256,y:682},"9":{x:512,y:650},"10":{x:768,y:682},
    "als√≥":{x:1024,y:682},"fels≈ë":{x:1280,y:682},"kir√°ly":{x:1536,y:682},"√°sz":{x:1792,y:682}
  },
  "makk": {
    "7":{x:0,y:1023},"8":{x:256,y:1023},"9":{x:512,y:1023},"10":{x:768,y:1023},
    "als√≥":{x:1024,y:1023},"fels≈ë":{x:1280,y:1023},"kir√°ly":{x:1536,y:1023},"√°sz":{x:1792,y:1023}
  }
};

function cardDiv(c,p,i){
    const d=document.createElement("div");
    d.className="card";
    const pos=CARD_POSITIONS[c.s][c.v];
    d.style.backgroundPosition=`-${pos.x}px -${pos.y}px`;
    if(p!==undefined) d.onclick=()=>play(p,i);
    return d;
}

function render(){
    document.getElementById("player").textContent="J√°t√©kos "+(current+1);
    ["table","hand0","hand1"].forEach(id=>document.getElementById(id).innerHTML="");

    table.forEach(c=>{
        document.getElementById("table").appendChild(cardDiv(c));
    });

    hands.forEach((h,p)=>{
        h.forEach((c,i)=>{
            const d=cardDiv(c,p,i);
            if(p!==current) d.classList.add("disabled");
            document.getElementById("hand"+p).appendChild(d);
        });
    });
}

// start
makeDeck();
shuffle(deck);
deal();
render();
</script>

</body>
</html>
